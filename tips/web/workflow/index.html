
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A open community curated collection of tutorials for Eclipse Vert.x">
      
      
        <link rel="canonical" href="http://vertx-tutorials.jetdrone.xyz/tips/web/workflow/">
      
      
        <meta name="author" content="Paulo Lopes">
      
      
        <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.8.1">
    
    
      
        <title>Web Development Workflow - Tutorials for Vert.x</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-bfecc7305d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="deep-purple" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="http://vertx-tutorials.jetdrone.xyz" title="Tutorials for Vert.x" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Tips
                </span>
              
            
            Web Development Workflow
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/pmlopes/vertx-tutorials" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      pmlopes/vertx-tutorials
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Tutorials for Vert.x
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/pmlopes/vertx-tutorials" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      pmlopes/vertx-tutorials
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Welcome" class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/oauth2/github/" title="Oauth2" class="md-nav__link">
      Oauth2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Tips
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tips
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Web Development Workflow
      </label>
    
    <a href="./" title="Web Development Workflow" class="md-nav__link md-nav__link--active">
      Web Development Workflow
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-backend-web-application" title="A Backend web application" class="md-nav__link">
    A Backend web application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-minimal-server" title="A minimal server" class="md-nav__link">
    A minimal server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-this-hot-reload" title="What is this hot reload?" class="md-nav__link">
    What is this hot reload?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-frontend-application" title="A frontend application" class="md-nav__link">
    A frontend application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packagejson" title="package.json" class="md-nav__link">
    package.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-webpack" title="Configure webpack" class="md-nav__link">
    Configure webpack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-you-application" title="Building you application" class="md-nav__link">
    Building you application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#watching-for-changes" title="Watching for changes" class="md-nav__link">
    Watching for changes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hot-reload" title="Hot reload" class="md-nav__link">
    Hot reload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-backend-web-application" title="A Backend web application" class="md-nav__link">
    A Backend web application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-minimal-server" title="A minimal server" class="md-nav__link">
    A minimal server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-this-hot-reload" title="What is this hot reload?" class="md-nav__link">
    What is this hot reload?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-frontend-application" title="A frontend application" class="md-nav__link">
    A frontend application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#packagejson" title="package.json" class="md-nav__link">
    package.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-webpack" title="Configure webpack" class="md-nav__link">
    Configure webpack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-you-application" title="Building you application" class="md-nav__link">
    Building you application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#watching-for-changes" title="Watching for changes" class="md-nav__link">
    Watching for changes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hot-reload" title="Hot reload" class="md-nav__link">
    Hot reload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="a-workflow-for-modern-web-development">A Workflow for Modern Web Development<a class="headerlink" href="#a-workflow-for-modern-web-development" title="Permanent link">&para;</a></h1>
<p>Modern web development is more than just a HTTP server and generation of HTML on a request response workflow.</p>
<p>This would be the case in the old days of Servlet programming, nowadays we need to build complex single page applications with many resources and complex build steps.</p>
<p>With Vert.x we can define a workflow that is familiar both to backend developers and as well to frontend developers.</p>
<h2 id="a-backend-web-application">A Backend web application<a class="headerlink" href="#a-backend-web-application" title="Permanent link">&para;</a></h2>
<p>A typical backend application would be a server serving some content, for this one would use maven to build the application, your <code>pom.xml</code> would look like:</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>
         <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>

  <span class="nt">&lt;groupId&gt;</span>com.example<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>com.example<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>

  <span class="nt">&lt;name&gt;</span>example<span class="nt">&lt;/name&gt;</span>

  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>io.vertx<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>vertx-web<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.4.2<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>xyz.jetdrone<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>hot-reload<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>0.0.2<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>

  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;pluginManagement&gt;</span>
      <span class="nt">&lt;plugins&gt;</span>
        <span class="c">&lt;!-- We specify the Maven compiler plugin as we need to set it to Java 1.8 --&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>3.1<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;source&gt;</span>1.8<span class="nt">&lt;/source&gt;</span>
            <span class="nt">&lt;target&gt;</span>1.8<span class="nt">&lt;/target&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/pluginManagement&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-shade-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.3<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>shade<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;transformers&gt;</span>
                <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;manifestEntries&gt;</span>
                    <span class="nt">&lt;Main-Class&gt;</span>io.vertx.core.Launcher<span class="nt">&lt;/Main-Class&gt;</span>
                    <span class="nt">&lt;Main-Verticle&gt;</span>com.example.Main<span class="nt">&lt;/Main-Verticle&gt;</span>
                  <span class="nt">&lt;/manifestEntries&gt;</span>
                <span class="nt">&lt;/transformer&gt;</span>
                <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;resource&gt;</span>META-INF/services/io.vertx.core.spi.VerticleFactory<span class="nt">&lt;/resource&gt;</span>
                <span class="nt">&lt;/transformer&gt;</span>
              <span class="nt">&lt;/transformers&gt;</span>
              <span class="nt">&lt;outputFile&gt;</span>${project.basedir}/target/${project.artifactId}-${project.version}-fat.jar<span class="nt">&lt;/outputFile&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</pre></div>

<p>And the source code structure would be:</p>
<div class="codehilite"><pre><span></span>.
├── pom.xml
└── src
    └── main
        ├── java
        │   └── com
        │       └── example
        │           └── Main.java
        └── resources
            └── webroot
                └── index.html
</pre></div>

<h3 id="a-minimal-server">A minimal server<a class="headerlink" href="#a-minimal-server" title="Permanent link">&para;</a></h3>
<p>The minimal <code>Server</code> would be the <code>Main.java</code> file and it should look like:</p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="nn">com.example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.vertx.core.AbstractVerticle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.vertx.ext.web.Router</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.vertx.ext.web.handler.StaticHandler</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">xyz.jetdrone.vertx.hot.reload.HotReload</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="kd">extends</span> <span class="n">AbstractVerticle</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

    <span class="kd">final</span> <span class="n">Router</span> <span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="o">.</span><span class="na">router</span><span class="o">(</span><span class="n">vertx</span><span class="o">);</span>
    <span class="c1">// development hot reload</span>
    <span class="n">router</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">handler</span><span class="o">(</span><span class="n">HotReload</span><span class="o">.</span><span class="na">create</span><span class="o">());</span>
    <span class="c1">// Serve the static resources</span>
    <span class="n">router</span><span class="o">.</span><span class="na">route</span><span class="o">().</span><span class="na">handler</span><span class="o">(</span><span class="n">StaticHandler</span><span class="o">.</span><span class="na">create</span><span class="o">());</span>

    <span class="n">vertx</span><span class="o">.</span><span class="na">createHttpServer</span><span class="o">().</span><span class="na">requestHandler</span><span class="o">(</span><span class="n">router</span><span class="o">::</span><span class="n">accept</span><span class="o">).</span><span class="na">listen</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>It is very basic, it uses the hot deploy handler and serves static files.</p>
<p>While the <code>index.html</code> would be:</p>
<div class="codehilite"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hot Reload<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;main&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;bundle.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/hot-reload/script&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;application/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>

<h3 id="what-is-this-hot-reload">What is this hot reload?<a class="headerlink" href="#what-is-this-hot-reload" title="Permanent link">&para;</a></h3>
<p>You might have noticed these hot reload references. Hot reload is a handler that will reload your page every time your server restarts, it is a development time handler that you can ignore once you go into production but will save you many <code>F5</code> clicks.</p>
<p>You will see it in action later.</p>
<h2 id="a-frontend-application">A frontend application<a class="headerlink" href="#a-frontend-application" title="Permanent link">&para;</a></h2>
<p>Lets look into the frontend aspect. Modern web development is complex, the most popular choices are between using:</p>
<ul>
<li>EcmaScript6</li>
<li>TypeScript</li>
</ul>
<p>For programming and</p>
<ul>
<li>Angular4</li>
<li>React.js</li>
<li>Vue.js</li>
<li>Aurelia</li>
<li>Backbone</li>
</ul>
<p>as framework. But lets keep it simple, a simple hello world using <a href="https://webpack.js.org/">webpack</a> since pretty much all these options rely on it as a base build and bundler.</p>
<p>Your project will have some more files:</p>
<div class="codehilite"><pre><span></span>.
├── package.json
├── pom.xml
├── src
│   ├── client
│   │   └── index.js
│   └── main
│       ├── java
│       │   └── com
│       │       └── example
│       │           └── Main.java
│       └── resources
│           └── webroot
│               └── index.html
└── webpack.config.js
</pre></div>

<h3 id="packagejson">package.json<a class="headerlink" href="#packagejson" title="Permanent link">&para;</a></h3>
<p>The <code>package.json</code> file is the couter part of <code>pom.xml</code> for the frontend world, a minimal example would be:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;basic&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;private&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Paulo Lopes&quot;</span><span class="p">,</span>
  <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;MIT&quot;</span><span class="p">,</span>

  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="p">},</span>

  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;babel-core&quot;</span><span class="p">:</span> <span class="s2">&quot;^6.22.1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;babel-loader&quot;</span><span class="p">:</span> <span class="s2">&quot;^6.2.10&quot;</span><span class="p">,</span>
    <span class="nt">&quot;webpack&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.2.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;webpack-vertx-plugin&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.2&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Remember that I want to make a <code>hello world</code> example so there are no <code>dependencies</code> just <code>devDependencies</code> so we can use webpack.</p>
<h3 id="configure-webpack">Configure webpack<a class="headerlink" href="#configure-webpack" title="Permanent link">&para;</a></h3>
<p>Webpack is controlled by the file <code>webpack.config.js</code> it is code as oposed to <code>package.json</code> for this example it should be:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">VertxPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-vertx-plugin&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">entry</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src/client/index.js&#39;</span><span class="p">),</span>
  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src/main/resources/webroot&#39;</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">loaders</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.js$/</span><span class="p">,</span> <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/node_modules/</span><span class="p">,</span> <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;babel-loader&#39;</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>

  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">VertxPlugin</span><span class="p">({</span>
      <span class="nx">fatJar</span><span class="o">:</span> <span class="s1">&#39;target/com.example-1.0.0-fat.jar&#39;</span>
    <span class="p">})</span>
  <span class="p">]</span>
<span class="p">};</span>
</pre></div>

<p>What we're saying here is that our application starts from the <code>src/client/index.js</code> file and we will use <a href="https://babeljs.io/">babel.js</a> to transpile modern JavaScript to JavaScript browsers can handle.</p>
<p>We're using a special Vert.x plugin that does some nice tricks such as extracting <code>js</code> from java <code>jar</code>s so they are available to babel. This gives you better code analysis and more optimized bundles.</p>
<p>So finally lets look at <code>index.js</code>:</p>
<div class="codehilite"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">;</span>
</pre></div>

<p>Simple!</p>
<h2 id="building-you-application">Building you application<a class="headerlink" href="#building-you-application" title="Permanent link">&para;</a></h2>
<p>With the given setup <code>webpack</code> will drive the build. The reason is that in order to build the backend one needs the frontend application under the <code>src/main/resources</code> so it can be packaged with the final runnable jar.</p>
<p>Webpack does not know anything about java or maven so that is where the plugin gets in action. It will run <code>maven package</code> once webpack sucessfuly builds.</p>
<p>So the flow will be:</p>
<ol>
<li>webpack start</li>
<li>babel will transpile js if needed</li>
<li>webpack generates a <code>bundle.js</code> under <code>src/main/resources/webroot</code></li>
<li>VertxPlugin will run <code>mvn package</code></li>
</ol>
<p>But to you it would be just as running:</p>
<div class="codehilite"><pre><span></span>$ webpack
Running: mvn...
Running: mvn...
Hash: ceaea9fa624993f698d5
Version: webpack 2.7.0
Time: 6237ms
        Asset     Size  Chunks             Chunk Names
    bundle.js  2.73 kB       0  [emitted]  main
bundle.js.map  2.88 kB       0  [emitted]  main
   [0] ./src/client/index.js 59 bytes {0} [built]
</pre></div>

<p>This works great but you will find yourself restarting and reloading the server and browser all the time as you keep developing your application.</p>
<h2 id="watching-for-changes">Watching for changes<a class="headerlink" href="#watching-for-changes" title="Permanent link">&para;</a></h2>
<p>In order to optimize the workflow, webpack can watch for changes and trigger a new build. However this does not apply to the java side of the project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also watch changes with vert.x by running <code>java -jar yourjar.jar --redeploy=&quot;src/**&quot; --on-redeploy=&quot;cmd to run&quot;</code>.</p>
</div>
<p>But that would not be productive if you would need to do it manually so the plugin will identify when webpack is running in watch mode and do it for you.</p>
<p>So your run would be:</p>
<div class="codehilite"><pre><span></span>webpack --watch

Webpack is watching the files…

Running: mvn...
Running: java...
Hash: ceaea9fa624993f698d5
Version: webpack 2.7.0
Time: 3641ms
        Asset     Size  Chunks             Chunk Names
    bundle.js  2.73 kB       0  [emitted]  main
bundle.js.map  2.88 kB       0  [emitted]  main
   [0] ./src/client/index.js 59 bytes {0} [built]
Sep 07, 2017 11:22:24 PM io.vertx.core.impl.launcher.commands.Watcher
INFO: Watched paths: [/home/plopes/Projects/pmlopes/webpack-vertx-js/templates/minimal/src/main]
Sep 07, 2017 11:22:24 PM io.vertx.core.impl.launcher.commands.Watcher
INFO: Starting the vert.x application in redeploy mode
Sep 07, 2017 11:22:24 PM io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer
INFO: Succeeded in deploying verticle
</pre></div>

<p>And you would see that the application would get recompiled if files are changed.</p>
<h3 id="hot-reload">Hot reload<a class="headerlink" href="#hot-reload" title="Permanent link">&para;</a></h3>
<p>Now that you can watch for changes we can use the handlers stated initially and this would be like:</p>
<p><img alt="" src="../images/hotreload.gif" /></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../../tutorials/oauth2/github/" title="Oauth2" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Oauth2
              </span>
            </div>
          </a>
        
        
          <a href="../../../contributing/" title="Contributing" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Contributing
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 Paulo Lopes
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://jetdrone.xyz" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/pmlopes" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/jetdrone" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/pmlopes" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-6940329b9f.js"></script>
      
      
      <script>app.initialize({url:{base:"../../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-84828576-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>